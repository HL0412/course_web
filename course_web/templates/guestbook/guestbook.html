{% extends 'base.html' %}{% load staticfiles %}{% block title %}课程教学网--交流社区{% endblock %}{% block custom_bread %}{% endblock %}{% block content %}<section>    <div class="container-fluid guestbook_message">        <div class="col-md-3 guestbook-left">             <div class=" myself">                 <dl>                     {% if request.user.is_authenticated %}                         <dd><img class="img-circle" src=" {{ MEDIA_URL }}{{ request.user.image }} "></dd>                         <dt>昵&nbsp;&nbsp;称:&nbsp;&nbsp;&nbsp;{{ user.nick_name}}</dt>                             {% if request.user.is_student %}                             <dt>姓&nbsp;&nbsp;名:&nbsp;&nbsp;&nbsp;{{ student.name}}</dt>                             {% else %}                             <dt>姓&nbsp;&nbsp;名:&nbsp;&nbsp;&nbsp;{{ teacher.name}}</dt>                             {% endif %}                     {% else %}                         <img  class="img-thumbnail" src="{% static 'images/1.jpg' %}">                    {% endif %}                </dl>            </div>            <div class="guestbook">                <input id="search_keywords" class="fl" type="text" value="" placeholder="请输入搜索内容">                <img class="search_btn fr " id="jsSearchBtn" src="{% static 'images/search_btn.png' %}"/>                <h3>热门话题</h3>                <ul>                    <li><a>c语言</a></li>                    <li>数据结构</li>                    <li>java</li>                    <li>c语言</li>                    <li>数据结构</li>                    <li>java</li>                    <li>c语言</li>                    <li>数据结构</li>                    <li>java</li>                </ul>            </div>        </div>        <div class="row col-md-8 guestbook-right">            <div class="guestbook_content">                <form id="publish_guestbook" method="get">                    <h2>留言发表<label>标题：<input type="text" name="title"/></label></h2>                    <textarea  id="editor_id" name="guestbook"></textarea>                    <div class="guestbook_more">                        <input id="publish" class="btn btn-info" type="submit" placeholder="发表" value="发表">                        <label>发布时间：<input type="date" name="date"/></label>                    </div>                    {% csrf_token %}                </form>            </div>            <div class="guestbook_list">                <div class="edit">                    <h2>留言列表</h2>                    <div class="sort">                        <ul>                            <li>                                <span  class="contents col-md-10">留言内容 </span>                                <span class="time col-md-1">TIME</span>                            </li>                            {% for guestbook in guestbooks%}                            <li>                                <span class="contents col-md-10">                                    <a href="{% url 'guestbook:guestbook_detail'%} {{ guestbook.id}}">{{ guestbook.title }}</a>                                </span>                                <span class="time col-md-1">{{ guestbook.g_time}}</span>                            </li>                            {% endfor %}                            <li>                                <span class="contents col-md-10">数据结构意味着接口或封装：一个数据结构可被视为两个函数之间的接口，或者是由数据类型联合组成的存储内容的访问方法封装。</span>                                <span class="time col-md-1">2015-9-8</span>                            </li>                            <li>                                <span class="contents col-md-10">数据结构意味着接口或封装：一个数据结构可被视为两个函数之间的接口，或者是由数据类型联合组成的存储内容的访问方法封装。</span>                                <span class="time col-md-1">2015-9-8</span>                            </li>                            <li>                                <span class="contents col-md-10">数据结构意味着接口或封装：一个数据结构可被视为两个函数之间的接口，或者是由数据类型联合组成的存储内容的访问方法封装。</span>                                <span class="time col-md-1">2015-9-8</span>                            </li>                            <li>                                <span class="contents col-md-10">数据结构意味着接口或封装：一个数据结构可被视为两个函数之间的接口，或者是由数据类型联合组成的存储内容的访问方法封装。</span>                                <span class="time col-md-1">2015-9-8</span>                            </li>                            <li>                                <span class="contents col-md-10">数据结构意味着接口或封装：一个数据结构可被视为两个函数之间的接口，或者是由数据类型联合组成的存储内容的访问方法封装。</span>                                <span class="time col-md-1">2015-9-8</span>                            </li>                        </ul>                    </div>                </div>            </div>        </div>    </div></section>{% endblock %}{% block custom_js %}<script src="/static/js/editor/kindeditor/kindeditor-all-min.js"></script><script src="/static/js/editor/kindeditor/lang/zh-CN.js"></script><script src="/static/js/editor/kindeditor/themes/default/default.css"></script><script>    var editor;    KindEditor.ready(function (k) {        editor = k.create('#editor_id' ,{        });    })</script><script type="text/javascript">    $('#publish').on('click', function() {        $.ajax({            cache: false,            type: "POST",            url:"{% url 'guestbook:publish_guestbook' %}",            async: true,            beforeSend: function (xhr, settings) {                xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");            },            success: function (data) {                if (data.status == 'fail') {                        alert(data.msg);                        window.location.href = "/login/";                }else if (data.status == 'success') {                    window.location.reload();//刷新当前页面.                }            }        });    });</script>{% endblock %}